<!--
本文件由智谱 AI 自动翻译生成
原文件: SKILL.md
翻译时间: 2025-12-12 16:13:03
翻译模型: glm-4-flash
原文大小: 6,593 字符
-->

---
name: markdown-to-epub-converter
description: 将 Markdown 文档和聊天摘要转换为可在任何设备上阅读或上传到 Kindle 的格式化的 EPUB 电子书文件。
---

# Markdown to EPUB Converter 技能

此技能将 Markdown 文档转换为专业的 EPUB 电子书文件。非常适合将研究文档、博客文章、文章或聊天对话摘要转换为便携式、设备无关的电子书格式。

## 概述

该技能接受多种格式的 Markdown 内容，并生成一个适用于所有主流电子书阅读器的正确格式化的 EPUB3 文件，包括：
- Apple Books
- Amazon Kindle（通过 Kindle for Mac/Windows/iOS/Android）
- Google Play Books
- Kobo 和其他 EPUB 阅读器
- 任何标准 EPUB 阅读器

## 输入格式

### 选项 1：原始 Markdown 文本
直接在您的消息中提供 Markdown 内容：

```
将以下 Markdown 转换为 EPUB：
# 我的书籍标题
## 第一章
这是第一章内容...
```

### 选项 2：文件路径
提供要转换的 Markdown 文件的路径。

## 工作原理

1. **Markdown 解析**：分析您的 Markdown 并自动：
   - 将 H1 标题（`#`）视为章节边界
   - 将 H2 标题（`##`）视为章节内的部分标题
   - 保留格式（粗体、斜体、链接、列表、代码块）

2. **结构生成**：创建正确的 EPUB 结构：
   - 从章节自动生成目录
   - 导航文档（EPUB3 标准）
   - 元数据（标题、语言等）

3. **文件创建**：生成一个可供下载和使用的有效 EPUB3 文件

## 使用示例

### 示例 1：转换博客文章
"将以下 Markdown 博客文章转换为 EPUB：
# 如何构建简单的 Web 服务器
## 简介
...内容..."

### 示例 2：转换研究摘要
"我有用 Markdown 格式的笔记。将它们转换为 EPUB 电子书。内容如下：
# 研究项目：机器学习基础
## 第一章：基础知识
..."

### 示例 3：转换聊天摘要
"将我们到目前为止的对话总结为 Markdown 并将其转换为 EPUB 以供参考"

## 输出

该技能生成一个可下载的 EPUB 文件，包括：
- 专业格式化
- 自动目录
- 正确的章节结构
- 支持以下 Markdown 格式化元素：
  - 标题（所有级别）
  - 粗体和斜体文本
  - 超链接
  - 列表（有序和无序列表）
  - 代码块和内联代码
  - 引用
  - 水平线

## 支持的 Markdown 元素

| 元素 | Markdown | 支持 | 备注 |
|---------|----------|---------|-------|
| 标题 | `# H1` 通过 `###### H6` | 全部 | 自动 TOC 生成 |
| 粗体 | `**文本**` 或 `__文本__` | 全部 | |
| 斜体 | `*文本*` 或 `_文本_` | 全部 | |
| 链接 | `[文本](url)` | 全部 | 电子书中可点击 |
| 列表 | `- 项目` 或 `1. 项目` | 全部 | 支持嵌套列表 |
| 代码块 | ` ```语言 ` | **增强** | 语法高亮就绪，等宽字体 |
| 内联代码 | ` `代码` ` | **增强** | 样式背景，边框 |
| 表格 | Markdown 表格 | **增强** | 样式标题，交替行 |
| 引用 | `> 引用` | 全部 | 使用左边框样式 |
| 水平线 | `---` 或 `***` | 全部 | |

## 高级功能

### 增强的代码块支持

代码块以以下方式格式化：
- **高级等宽字体**：SF Mono、Monaco、Fira Code、Consolas 和更多
- **样式背景**：浅灰色背景，带有蓝色强调边框
- **语言检测**：在 ` ``` ` 后指定语言以进行未来的语法高亮
- **正确转义**：安全转义 HTML 字符
- **溢出处理**：长行水平滚动

示例：
```python
def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)
```

### 增强的表格支持

表格以专业样式呈现：
- **样式标题**：蓝色背景，白色文本
- **交替行**：斑马条纹以提高可读性
- **单元格间距**：舒适的间距，便于阅读
- **内联格式**：代码、粗体、斜体和链接在单元格中工作
- **响应式**：表格适应不同的屏幕尺寸

示例：
| 特性 | 状态 | 备注 |
|---------|--------|-------|
| 标题 | ✓ | 全部支持 |
| 代码 | ✓ | 增强样式 |
| 表格 | ✓ | 专业布局 |

### 自定义标题和元数据
您可以指定 EPUB 元数据：
- 书籍标题（默认为第一个 H1 标题）
- 作者姓名
- 语言
- 出版日期

### 章节组织
章节自动从以下内容检测：
- H1 标题（`#`）作为主要章节分隔符
- H1 之间的逻辑内容部分
- 章节之间的自动页面分隔

### 样式
生成的 EPUB 使用干净、易读的默认样式，该样式：
- 尊重读者的字体偏好
- 在所有屏幕尺寸上工作
- 保持适当的间距和层次结构
- 包括适当的边距和填充

## 技术细节

- **格式**：EPUB3（与所有现代阅读器兼容）
- **编码**：UTF-8
- **HTML 版本**：XHTML 1.1
- **CSS 支持**：响应式样式

## 下载您的 EPUB

生成后，文件将可供下载。然后您可以：
1. 将 EPUB 下载到您的计算机
2. 使用您首选的电子书阅读器打开它
3. 转移到您的 Kindle、iPad 或其他设备
4. 通过电子邮件或云直接上传到 Kindle

## 最佳结果提示

1. **使用适当的 Markdown 结构**：当 Markdown 遵循标准约定时（H1 用于标题，H2 用于部分）
2. **清晰的章节分隔**：使用 H1 标题清晰地标记章节分隔
3. **描述性标题**：标题成为目录，因此请使它们清晰且具有描述性
4. **内容组织**：在标题之间逻辑地放置内容
5. **支持的格式**：坚持基本 Markdown 格式化以获得最佳兼容性

## 故障排除

**EPUB 无法打开**：确保您的 Markdown 格式正确。检查链接中的匹配括号和正确的语法。

**目录为空**：确保您的 Markdown 包含 H1 标题以定义章节。

**格式看起来不同**：电子书阅读器应用自己的字体和样式。这是正常和预期的行为。

## 脚本

- `epub_generator.py` - 核心 EPUB 文件创建和格式化
- `markdown_processor.py` - Markdown 解析和结构提取

## 未来增强

- 自动生成带有自定义图片的封面页
- Kindle 特定优化（.mobi 格式）
- 根据用户偏好自定义 CSS 样式
- 多文档合并
- 图像嵌入和优化
- 高级元数据支持